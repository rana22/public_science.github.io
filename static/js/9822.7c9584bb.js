"use strict";(self.webpackChunkICDC_Frontend=self.webpackChunkICDC_Frontend||[]).push([[9822],{89822:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ve});var a=n(96540),l=n(92168),r=n(59831),o=n(88737),c=n(33551),s=n(2337),i=n(22079),m=n(44877),u=n(44015),d=n(50346),p=n(55127),E=n(72048),v=n(7562),g=n(20212),A=n(92566),h=n(1043),b=n(64623),f=n(17681),y=n(34339),C=n(19455),x=n(3372),k=n(13945),N=n(27465),S=n(3959),T=n(29153),w=n(51629),M=n(80607),I=n(67034);const F=(0,u.observer)((function({slot:e}){const[t,n]=(0,a.useState)(""),[l,r]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,e.name?a.createElement(k.A,null,e.name):null,a.createElement(N.A,{disablePadding:!0},e.value.map(((t,n)=>a.createElement(S.Ay,{key:n,disableGutters:!0},a.createElement(h.A,{value:t,onChange:t=>e.setAtIndex(n,t.target.value),InputProps:{endAdornment:a.createElement(T.A,{position:"end"},a.createElement(C.A,{onClick:()=>e.removeAtIndex(n)},a.createElement(I.A,null)))}})))),l?a.createElement(S.Ay,{disableGutters:!0},a.createElement(h.A,{value:t,placeholder:"add new",onChange:e=>n(e.target.value),InputProps:{endAdornment:a.createElement(T.A,{position:"end"},a.createElement(a.Fragment,null,a.createElement(w.A,{color:"primary",variant:"contained",style:{margin:2},"data-testid":`stringArrayAdd-${e.name}`,onClick:()=>{r(!1),e.add(t),n("")}},"OK"),a.createElement(w.A,{color:"primary",variant:"contained",style:{margin:2},onClick:()=>{r(!1),n("")}},"Cancel")))}})):null,a.createElement(w.A,{color:"primary",variant:"contained",style:{margin:4},disabled:l,onClick:()=>r(!0)},"Add item")),a.createElement(M.A,null,e.description))}));var L=n(56655),j=n(88819),P=n(52162);const $='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',D=(0,m.makeStyles)()((e=>({callbackEditor:{marginTop:"16px",borderBottom:`1px solid ${e.palette.divider}`,width:"100%",fontFamily:$},textAreaFont:{fontFamily:$},callbackContainer:{width:"100%",overflowX:"auto"},error:{color:"red",fontSize:"0.8em"}}))),H=(0,u.observer)((function({slot:e}){const{classes:t}=D(),[n,l]=(0,a.useState)(e.value),[r,o]=(0,a.useState)(),c=(0,v.useDebounce)(n,400);return(0,a.useEffect)((()=>{var t;try{const n=c.startsWith("jexl:")?c:`jexl:${c}`;if("jexl:"===n)throw new Error("Empty jexl expression is not valid");(0,j.stringToJexlExpression)(n,null===(t=(0,d.getEnv)(e).pluginManager)||void 0===t?void 0:t.jexl),e.set(n),o(void 0)}catch(e){console.error({e}),o(e)}}),[c,e]),a.createElement(a.Fragment,null,r?a.createElement("p",{className:t.error},`${r}`):null,a.createElement("div",{className:t.callbackContainer},a.createElement(h.A,{multiline:!0,className:t.callbackEditor,value:n.startsWith("jexl:")?n.split("jexl:")[1]:n,onChange:e=>l(e.target.value),style:{background:r?"#fdd":void 0},InputProps:{classes:{input:t.textAreaFont}}}),a.createElement("p",null,e.description),a.createElement(L.A,{title:a.createElement("div",null,"Callbacks are written in Jexl format. Click to learn more.",a.createElement("br",null)," Names of available context items: ",e.contextVariable),arrow:!0},a.createElement(C.A,{color:"primary",onClick:()=>{const e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)}},a.createElement(P.default,null)))))})),W=(0,a.lazy)((()=>n.e(9457).then(n.t.bind(n,39457,23)))),V=e=>{const{value:t="#000",label:n="",TextFieldProps:l={},onChange:r}=e,[o,c]=(0,a.useState)(!1);return a.createElement("div",{style:{display:"flex"}},a.createElement(h.A,{value:t,label:n,onClick:()=>c(!o),onChange:e=>r(e.target.value),...l}),a.createElement("div",{style:{marginTop:10}},a.createElement(a.Suspense,{fallback:null},a.createElement(W,{color:t,onChange:e=>r(e)}))))},z=(0,u.observer)((function(e){const{slot:t}=e;return a.createElement(V,{label:t.name,value:t.value,onChange:e=>t.set(e),TextFieldProps:{helperText:t.description,fullWidth:!0}})}));var O=n(24964),K=n(4785),B=n(51359),J=n(56239),U=n(16718);const _=(0,m.makeStyles)()((e=>({card:{marginTop:e.spacing(1)}}))),G=(0,u.observer)((function({slot:e}){const{classes:t}=_(),[n,l]=(0,a.useState)("");return a.createElement(a.Fragment,null,a.createElement(k.A,null,e.name),[...e.value].map((([n,l])=>a.createElement(K.A,{raised:!0,key:n,className:t.card},a.createElement(B.A,{title:n,action:a.createElement(C.A,{onClick:()=>e.remove(n)},a.createElement(I.A,null))}),a.createElement(J.A,null,a.createElement(F,{slot:{name:e.name,value:l,description:`Values associated with entry ${n}`,setAtIndex:(t,a)=>e.setAtKeyIndex(n,t,a),removeAtIndex:t=>e.removeAtKeyIndex(n,t),add:t=>e.addToKey(n,t)}}))))),a.createElement(K.A,{raised:!0,className:t.card},a.createElement(B.A,{disableTypography:!0,title:a.createElement(h.A,{fullWidth:!0,value:n,placeholder:"add new",onChange:e=>l(e.target.value),InputProps:{endAdornment:a.createElement(T.A,{position:"end"},a.createElement(C.A,{disabled:""===n,onClick:()=>{e.add(n,[]),l("")}},a.createElement(U.A,null)))}})})),a.createElement(M.A,null,e.description))}));function X(e){const{helperText:t}=e;return a.createElement(h.A,{...e,helperText:a.createElement(g.SanitizedHTML,{html:t||""}),FormHelperTextProps:{component:"div"},fullWidth:!0})}const R=(0,u.observer)((function({slot:e}){const[t,n]=(0,a.useState)(e.value);return(0,a.useEffect)((()=>{var n;const a=Number.parseFloat(t);Number.isNaN(a)?null===(n=e.reset)||void 0===n||n.call(e):e.set(a)}),[e,t]),a.createElement(X,{label:e.name,helperText:e.description,value:t,type:"number",onChange:e=>n(e.target.value)})})),Z=(0,m.makeStyles)()((e=>({card:{marginTop:e.spacing(1)}}))),q=(0,u.observer)((function({slot:e}){const{classes:t}=Z(),[n,l]=(0,a.useState)("");return a.createElement(a.Fragment,null,a.createElement(k.A,null,e.name),[...e.value].map((([n,l])=>a.createElement(K.A,{raised:!0,key:n,className:t.card},a.createElement(B.A,{title:n,action:a.createElement(C.A,{onClick:()=>e.remove(n)},a.createElement(I.A,null))}),a.createElement(J.A,null,a.createElement(R,{slot:{value:l,set:t=>e.add(n,t)}}))))),a.createElement(K.A,{raised:!0,className:t.card},a.createElement(B.A,{disableTypography:!0,title:a.createElement(h.A,{fullWidth:!0,value:n,placeholder:"add new",onChange:e=>l(e.target.value),InputProps:{endAdornment:a.createElement(T.A,{position:"end"},a.createElement(C.A,{disabled:""===n,onClick:()=>{e.add(n,0),l("")}},a.createElement(U.A,null)))}})})),a.createElement(M.A,null,e.description))}));var Q=n(45359),Y=n(1775),ee=n(71238);const te=(0,u.observer)((function({slot:e}){return a.createElement(Q.A,null,a.createElement(Y.A,{label:e.name,control:a.createElement(ee.A,{checked:e.value,onChange:t=>e.set(t.target.checked)})}),a.createElement(M.A,null,e.description))})),ne=(0,m.makeStyles)()((e=>({paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}}))),ae=(0,u.observer)((function({slot:e}){return a.createElement(X,{label:e.name,helperText:e.description,value:e.value,onChange:t=>e.set(t.target.value)})})),le=(0,u.observer)((function({slot:e}){return a.createElement(h.A,{label:e.name,helperText:e.description,multiline:!0,value:e.value,onChange:t=>e.set(t.target.value)})})),re=()=>a.createElement(b.A,null,a.createElement("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"})),oe=(0,u.observer)((function({slot:e}){const[t,n]=(0,a.useState)(e.value);return(0,a.useEffect)((()=>{const n=Number.parseInt(t,10);Number.isNaN(n)||e.set(n)}),[e,t]),a.createElement(X,{label:e.name,helperText:e.description,value:t,type:"number",onChange:e=>n(e.target.value)})})),ce=(0,u.observer)((function({slot:e,slotSchema:t}){const n=(0,d.getPropertyMembers)((0,A.getSubType)(t)),l=(0,A.getUnionSubTypes)((0,A.getUnionSubTypes)((0,A.getSubType)(n.properties.value))[1]).map((e=>e.value));return a.createElement(X,{value:e.value,label:e.name,select:!0,helperText:e.description,onChange:t=>e.set(t.target.value)},l.map((e=>a.createElement(f.A,{key:e,value:e},e))))})),se=(0,u.observer)((function({slot:e}){var t;return a.createElement(g.FileSelector,{location:e.value,setLocation:t=>e.set(t),name:e.name,description:e.description,rootModel:null===(t=(0,v.getEnv)(e).pluginManager)||void 0===t?void 0:t.rootModel})})),ie={string:ae,text:le,fileLocation:se,stringArray:F,stringArrayMap:G,numberMap:q,number:R,integer:oe,color:z,stringEnum:ce,boolean:te,frozen:O.A,configRelationships:O.A},me=(0,u.observer)((function({slot:e,slotSchema:t}){const{classes:n}=ne(),{type:l}=e;let r=e.isCallback?H:ie[l];return r||(console.warn(`no slot editor defined for ${l}, editing as string`),r=ae),l in ie||console.warn(`SlotEditor needs to implement ${l}`),a.createElement(y.A,{className:n.paper},a.createElement("div",{className:n.paperContent},a.createElement(r,{slot:e,slotSchema:t})),a.createElement("div",{className:n.slotModeSwitch},e.contextVariable.length?a.createElement(C.A,{onClick:()=>e.isCallback?e.convertToValue():e.convertToCallback(),title:"convert to "+(e.isCallback?"regular value":"callback")},e.isCallback?a.createElement(re,null):a.createElement(x.default,null)):null))})),ue=(0,u.observer)((function({typeNameChoices:e,slot:t,slotName:n,onChange:l}){const{classes:r}=ne();return a.createElement(y.A,{className:r.paper},a.createElement("div",{className:r.paperContent},a.createElement(h.A,{value:t.type,label:"Type",select:!0,helperText:`Type of ${n} to use`,fullWidth:!0,onChange:l},e.map((e=>a.createElement(f.A,{key:e,value:e},e))))))})),de=(0,m.makeStyles)()((e=>{var t;return{expandIcon:{color:(null===(t=e.palette.tertiary)||void 0===t?void 0:t.contrastText)||"#fff"},root:{padding:e.spacing(1,3,1,1)},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:`1px solid ${e.palette.text.primary}`},noOverflow:{width:"100%",overflowX:"auto"}}})),pe=(0,u.observer)((function(e){const{classes:t}=de(),{slotName:n,slotSchema:m,schema:u,slot:d=u[n],path:v=[]}=e;let g;if((0,l.isConfigurationSchemaType)(m)){if(d.length)return d.map(((t,l)=>{const r=`${(0,p.singular)(n)} ${l+1}`;return a.createElement(pe,{key:r,...e,slot:t,slotName:r})}));const A=(0,l.getTypeNamesFromExplicitlyTypedUnion)(m);return A.length&&(g=a.createElement(ue,{typeNameChoices:A,slotName:n,slot:d,onChange:e=>{e.target.value!==d.type&&u.setSubschema(n,{type:e.target.value})}})),a.createElement(r.A,{defaultExpanded:!0,className:t.accordion},a.createElement(o.A,{expandIcon:a.createElement(E.default,{className:t.expandIcon})},a.createElement(c.A,null,[...v,n].join("➔"))),a.createElement(s.A,{className:t.expansionPanelDetails},g,a.createElement(i.A,{className:t.noOverflow},a.createElement(Ee,{schema:d,path:[...v,n]}))))}return(0,l.isConfigurationSlotType)(m)?a.createElement(me,{key:n,slot:d,slotSchema:m}):null})),Ee=(0,u.observer)((function({schema:e,path:t=[]}){const n=(0,d.getMembers)(e).properties;return a.createElement(a.Fragment,null,Object.entries(n).map((([n,l])=>a.createElement(pe,{key:n,slotName:n,slotSchema:l,path:t,schema:e}))))})),ve=(0,u.observer)((function({model:e}){const{classes:t}=de(),{target:n}=e,i=n&&(0,l.readConfObject)(n,"trackId"),m=n&&(0,l.readConfObject)(n,"name");return a.createElement(r.A,{key:i,defaultExpanded:!0,className:t.accordion},a.createElement(o.A,{expandIcon:a.createElement(E.default,{className:t.expandIcon})},a.createElement(c.A,null,null!=m?m:"Configuration")),a.createElement(s.A,{className:t.expansionPanelDetails,"data-testid":"configEditor"},n?a.createElement(Ee,{schema:n}):"no target set"))}))},67034:(e,t,n)=>{var a=n(24994);t.A=void 0;var l=a(n(42032)),r=n(74848);t.A=(0,l.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")}}]);