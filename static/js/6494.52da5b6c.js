"use strict";(self.webpackChunkICDC_Frontend=self.webpackChunkICDC_Frontend||[]).push([[6494],{26494:(e,t,a)=>{a.d(t,{convertTrackConfig:()=>o}),a(11375);var r=a(7562),i=a(92024);function o(e,t,a){var o,n,c,p,l;const u={trackId:(0,r.objectHash)(e),name:e.key||e.label},d=e.metadata&&(e.metadata.description||e.metadata.Description);d&&(u.description=d);const T=e.category||(null===(o=e.metadata)||void 0===o?void 0:o.category);u.category=T?T.split(/\s*\/\s*/):[];const{storeClass:s}=e;if(!e.urlTemplate){if(!(null==s?void 0:s.endsWith("FromConfig"))){const t=e.key||e.label;return console.warn(`Could not import JBrowse1 track "${t}" because it does not have a "urlTemplate" or is not a "FromConfig" track`),(0,i.generateUnsupportedTrackConf)(u.name,t,u.category)}return function(e,t){const a=(e.features||[]).map((e=>{const t=JSON.parse(JSON.stringify(e));return t.refName=e.seq_id,t.uniqueId=`${e.seq_id}:${e.start}-${e.end}:${e.name||""}`,t}));return t.adapter={type:"FromConfigAdapter",features:a},t.type="FeatureTrack",t}(e,u)}const y=e=>new URL(e,`${t}/`).href.replaceAll(/%7B/gi,"{").replaceAll(/%7D/gi,"}"),U=y(e.urlTemplate);if(s){if("JBrowse/Store/SeqFeature/BAM"===s){const t={type:"BamAdapter",bamLocation:{uri:U,locationType:"UriLocation"}};return e.baiUrlTemplate?t.index={location:{uri:y(e.baiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:y(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:`${U}.bai`,locationType:"UriLocation"}},{...u,type:"AlignmentsTrack",adapter:t}}if("JBrowse/Store/SeqFeature/CRAM"===s){const t={type:"CramAdapter",cramLocation:{uri:U,locationType:"UriLocation"},sequenceAdapter:a};return t.craiLocation=e.craiUrlTemplate?{uri:y(e.craiUrlTemplate),locationType:"UriLocation"}:{uri:`${U}.crai`,locationType:"UriLocation"},{...u,type:"AlignmentsTrack",adapter:t}}if("JBrowse/Store/SeqFeature/NCList"===s)return{...u,type:"FeatureTrack",adapter:{type:"NCListAdapter",rootUrlTemplate:{uri:U,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/BigWig"===s||"JBrowse/Store/BigWig"===s)return(null===(n=e.type)||void 0===n?void 0:n.endsWith("XYPlot"))?u.defaultRendering="xyplot":(null===(c=e.type)||void 0===c?void 0:c.endsWith("Density"))&&(u.defaultRendering="density"),{...u,type:"QuantitativeTrack",adapter:{type:"BigWigAdapter",bigWigLocation:{uri:U,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/VCFTabix"===s){const t={type:"VcfTabixAdapter",vcfGzLocation:{uri:U,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:y(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:y(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:`${U}.tbi`,locationType:"UriLocation"}},{...u,type:"VariantTrack",adapter:t}}if("JBrowse/Store/SeqFeature/VCFTribble"===s)return(0,i.generateUnsupportedTrackConf)(u.name,`VCFTribble (${U})`,u.category);if("JBrowse/Store/SeqFeature/GFF3"===s)return{...u,type:"FeatureTrack",adapter:{type:"Gff3Adapter",gffLocation:{uri:U,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/BigBed"===s)return{...u,type:"FeatureTrack",adapter:{type:"BigBedAdapter",bigBedLocation:{uri:U,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/GFF3Tabix"===s){const t={type:"Gff3TabixAdapter",gffGzLocation:{uri:U,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:y(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:y(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:`${U}.tbi`,locationType:"UriLocation"}},{...u,type:"FeatureTrack",adapter:t}}if("JBrowse/Store/SeqFeature/BED"===s)return(0,i.generateUnsupportedTrackConf)(u.name,`BED (${U})`,u.category);if("JBrowse/Store/SeqFeature/BEDTabix"===s){const t={type:"BedTabixAdapter",bedGzLocation:{uri:U,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:y(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:y(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:`${U}.tbi`,locationType:"UriLocation"}},{...u,type:"FeatureTrack",adapter:t}}if("JBrowse/Store/SeqFeature/GTF"===s)return{...u,type:"FeatureTrack",adapter:{type:"GtfAdapter",gtfLocation:{uri:U,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/StaticChunked"===s||"JBrowse/Store/Sequence/StaticChunked"===s)return(0,i.generateUnsupportedTrackConf)(u.name,`StaticChunked (${U})`,u.category);if("JBrowse/Store/SeqFeature/UnindexedFasta"===s)return(0,i.generateUnsupportedTrackConf)(u.name,`UnindexedFasta (${U})`,u.category);if("JBrowse/Store/SeqFeature/IndexedFasta"===s){const t={type:"IndexedFastaAdapter",fastaLocation:{uri:U,locationType:"UriLocation"}};return t.faiLocation=e.faiUrlTemplate?{uri:y(e.faiUrlTemplate),locationType:"UriLocation"}:{uri:`${U}.fai`,locationType:"UriLocation"},{...u,type:"SequenceTrack",adapter:t}}if("JBrowse/Store/SeqFeature/BgzipIndexedFasta"===s){const t={type:"BgzipFastaAdapter",fastaLocation:{uri:U,locationType:"UriLocation"}};return t.faiLocation=e.faiUrlTemplate?{uri:y(e.faiUrlTemplate),locationType:"UriLocation"}:{uri:`${U}.fai`,locationType:"UriLocation"},t.gziLocation=e.gziUrlTemplate?{uri:y(e.gziUrlTemplate),locationType:"UriLocation"}:{uri:`${U}.gzi`,locationType:"UriLocation"},{...u,type:"ReferenceSequenceTrack",adapter:t}}if("JBrowse/Store/SeqFeature/TwoBit"===s)return{...u,type:"ReferenceSequenceTrack",adapter:{type:"TwoBitAdapter",twoBitLocation:{uri:U,locationType:"UriLocation"}}}}if(u.adapter=(0,i.guessAdapter)({uri:U,locationType:"UriLocation"},void 0,U),!u.adapter)throw new Error("Could not determine adapter");return u.adapter.type===i.UNSUPPORTED?(0,i.generateUnsupportedTrackConf)(u.name,U,u.category):u.adapter.type===i.UNKNOWN?(0,i.generateUnknownTrackConf)(u.name,U,u.category):(u.type=(0,i.guessTrackType)(u.adapter.type),"QuantitativeTrack"===u.type&&((null===(p=e.type)||void 0===p?void 0:p.endsWith("XYPlot"))?u.defaultRendering="xyplot":(null===(l=e.type)||void 0===l?void 0:l.endsWith("Density"))&&(u.defaultRendering="density")),u)}}}]);