"use strict";(self.webpackChunkICDC_Frontend=self.webpackChunkICDC_Frontend||[]).push([[678],{80678:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var o=n(96540),a=n(85782),r=n.n(a),i=n(7562),s=n(92024),c=n(1779),l=n.n(c),f=n(17965),u=n.n(f),g=n(51629),d=n(44877),m=n(92168),C=n(26515),b=n(20212);function p({config:e}){const[t,n]=(0,o.useState)(),[a,r]=(0,o.useState)(),s=(0,i.getSession)(e),{rpcManager:c}=s;(0,o.useEffect)((()=>{(async()=>{try{const t=(0,m.readConfObject)(e,"adapter"),n=await c.call(e.trackId,"CoreGetInfo",{adapterConfig:t});r(n)}catch(e){console.error(e),n(e)}})()}),[e,c]);const l="string"==typeof a?{header:`<pre>${a.replaceAll("<","&lt;").replaceAll(">","&gt;")}</pre>`}:a||{};return null!==a?o.createElement(C.BaseCard,{title:"File info"},t?o.createElement(b.ErrorMessage,{error:t}):void 0===a?o.createElement(b.LoadingEllipses,{message:"Loading file data"}):o.createElement(C.Attributes,{attributes:l})):null}const E=(0,d.makeStyles)()({content:{minWidth:800}});function A(e,t){for(const n in e)n===t?delete e[n]:"object"==typeof e[n]&&A(e[n],t);return e}function h({config:e}){const[t,n]=(0,o.useState)(!1),a=(0,m.readConfObject)(e),r=(0,i.getSession)(e),{classes:s}=E(),c=(0,m.getConf)(r,["formatAbout","hideUris"])||(0,m.readConfObject)(e,["formatAbout","hideUris"]),{pluginManager:f}=(0,i.getEnv)(r),d=f.evaluateExtensionPoint("Core-customizeAbout",{config:{...a,...(0,m.getConf)(r,["formatAbout","config"],{config:a}),...(0,m.readConfObject)(e,["formatAbout","config"],{config:a})}},{session:r,config:e}),b=f.evaluateExtensionPoint("Core-extraAboutPanel",null,{session:r,config:e});return o.createElement("div",{className:s.content},o.createElement(C.BaseCard,{title:"Configuration"},c?null:o.createElement(g.A,{variant:"contained",style:{float:"right"},onClick:()=>{const e=A(l()(a),"baseUri");u()(JSON.stringify(e,null,2)),n(!0),setTimeout((()=>n(!1)),1e3)}},t?"Copied to clipboard!":"Copy config"),o.createElement(C.Attributes,{attributes:d,omit:["displays","baseUri","refNames","formatAbout"],hideUris:c})),b?o.createElement(C.BaseCard,{title:b.name},o.createElement(b.Component,{config:e})):null,o.createElement(p,{config:e}))}function v({config:e,handleClose:t}){const n=(0,i.getSession)(e),a=(0,s.getTrackName)(e,n),{pluginManager:c}=(0,i.getEnv)(n),l=c.evaluateExtensionPoint("Core-replaceAbout",h,{session:n,config:e});return o.createElement(r(),{open:!0,onClose:t,title:a,maxWidth:"xl"},o.createElement(l,{config:e}))}}}]);