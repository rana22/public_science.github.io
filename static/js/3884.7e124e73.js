"use strict";(self.webpackChunkICDC_Frontend=self.webpackChunkICDC_Frontend||[]).push([[3884],{63884:(e,t,n)=>{n.d(t,{drawFeats:()=>f});var o=n(7562),r=n(20709),s=n(88476),a=n(60604);function i(e){return 2*Math.random()*e-e}function l(e,t,n,o){e.strokeStyle=o,e.beginPath(),e.moveTo(t,0),e.lineTo(t,n),e.stroke()}function f(e,t,n,f){const{chainData:d,colorBy:c,drawInter:g,drawLongRange:h,lineWidthSetting:u,jitterVal:m}=e;if(!d)return;const v=(0,o.getContainingView)(e),{assemblyManager:k}=(0,o.getSession)(e),{chains:y,stats:P}=d,S=(0,a.d)(d),p=k.get(v.assemblyNames[0]),b=(null==c?void 0:c.type)||"insertSizeAndOrientation";if(p){t.lineWidth=u;for(const e of y)if(1===e.length&&h){const t=e[0];if(!S||8&t.flags){const e=[t,...(0,s.Cu)(t.SA,t.id,t.strand,t.name)].sort(((e,t)=>e.clipPos-t.clipPos));for(let t=0;t<e.length-1;t++)C(e[t],e[t+1],p,!0)}else C(t,{refName:t.next_ref||"",start:t.next_pos||0,end:t.next_pos||0,strand:t.strand},p,!0)}else{const t=S?e.filter((e=>!(2048&e.flags||8&e.flags))):e.sort(((e,t)=>e.clipPos-t.clipPos)).filter((e=>!(256&e.flags)));for(let e=0;e<t.length-1;e++)C(t[e],t[e+1],p,!1)}}function C(e,n,o,s){var a,d,c;const h=e.strand,u=n.strand,k=-1===u,y=-1===h?e.start:e.end,p=S?k?n.start:n.end:k?n.end:n.start,C=o.getCanonicalRefName(e.refName)||e.refName,x=o.getCanonicalRefName(n.refName)||n.refName,N=null===(a=v.bpToPx({refName:C,coord:y}))||void 0===a?void 0:a.offsetPx,T=null===(d=v.bpToPx({refName:x,coord:p}))||void 0===d?void 0:d.offsetPx;if(void 0!==N&&void 0!==T){const o=(T-N)/2,a=Math.abs(o),d=N-v.offsetPx,g=T-v.offsetPx,k=a>1e4;s&&k?(t.moveTo(d,0),t.beginPath()):(t.beginPath(),t.moveTo(d,0)),s&&k?t.strokeStyle="red":S?"insertSizeAndOrientation"===b?t.strokeStyle=(0,r.sY)(e,n,P)[0]:"orientation"===b?t.strokeStyle=(0,r.DW)(e)[0]:"insertSize"===b?t.strokeStyle=(null===(c=(0,r.L9)(e,n,P))||void 0===c?void 0:c[0])||"grey":"gradient"===b&&(t.strokeStyle=`hsl(${10*Math.log10(a)},50%,50%)`):"orientation"===b||"insertSizeAndOrientation"===b?t.strokeStyle=-1===h&&1===u?"navy":1===h&&-1===u?"green":"grey":"gradient"===b&&(t.strokeStyle=`hsl(${10*Math.log10(a)},50%,50%)`);const y=d+2*o,p=Math.min(f+i(m),a);s?a>1e5?(l(t,d+i(m),f,"red"),l(t,g+i(m),f,"red")):k?(t.arc(d+o+i(m),0,a,0,Math.PI),t.stroke()):(t.bezierCurveTo(d+i(m),p,y,p,y+i(m),0),t.stroke()):(t.bezierCurveTo(d+i(m),p,y,p,y+i(m),0),t.stroke())}else N&&g&&l(t,N-v.offsetPx,f,"purple")}}},60604:(e,t,n)=>{function o(e){for(const t of e.chains.values())if(1&t[0].flags)return!0;return!1}n.d(t,{d:()=>o})}}]);