"use strict";(self.webpackChunkICDC_Frontend=self.webpackChunkICDC_Frontend||[]).push([[139],{60139:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(2340),s=a(11375),n=a(34105),i=a(31056),c=a(26018),u=a(3822),h=a(63958);class o extends r.BaseFeatureDataAdapter{async getHeader(){const{header:e}=await this.setup();return e}async getMetadata(){const{header:e}=await this.setup();return new u.default({header:e}).getMetadata()}async setupP(){const e=this.pluginManager,t=await(0,s.openLocation)(this.getConf("vcfLocation"),e).readFile(),a=function(e){return 31===e[0]&&139===e[1]&&8===e[2]}(t)?await(0,c.unzip)(t):t;if(a.length>536870888)throw new Error("Data exceeds maximum string length (512MB)");const r=(new TextDecoder).decode(a),{header:n,lines:o}=(e=>{const t=[],a=[];return e.split(/\n|\r\n|\r/).map((e=>e.trim())).filter((e=>!!e)).forEach((e=>{e.startsWith("#")?t.push(e):e&&a.push(e)})),{header:t.join("\n"),lines:a}})(r),d={},l=new u.default({header:n});let f=0;for(const e of o){const t=new h.A({variant:l.parseLine(e),parser:l,id:`${this.id}-${f++}`}),a=t.get("refName");d[a]||(d[a]=new i.Ay),d[a].insert([t.get("start"),t.get("end")],t)}return{header:n,intervalTree:d}}async setup(){return this.vcfFeatures||(this.vcfFeatures=this.setupP().catch((e=>{throw this.vcfFeatures=void 0,e}))),this.vcfFeatures}async getRefNames(e={}){const{intervalTree:t}=await this.setup();return Object.keys(t)}getFeatures(e,t={}){return(0,n.ObservableCreate)((async t=>{var a;try{const{start:r,end:s,refName:n}=e,{intervalTree:i}=await this.setup();null===(a=i[n])||void 0===a||a.search([r,s]).forEach((e=>{t.next(e)})),t.complete()}catch(e){t.error(e)}}),t.signal)}freeResources(){}}o.capabilities=["getFeatures","getRefNames"];const d=o}}]);