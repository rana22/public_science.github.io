"use strict";(self.webpackChunkICDC_Frontend=self.webpackChunkICDC_Frontend||[]).push([[2442],{12442:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var l=n(96540),a=n(33551),r=n(51629),i=n(1043),s=n(29153),o=n(19455),c=n(59831),m=n(88737),u=n(44877),d=n(44015),g=n(50346),p=n(20212),E=n(7562),v=n(72048),A=n(12092),h=n(90891),f=n(27465),y=n(56655),k=n(3959),b=n(39781),C=n(29898),S=n(62848);const x=(0,l.lazy)((()=>n.e(9214).then(n.bind(n,9214)))),P=(0,u.makeStyles)()((()=>({lockedPluginTooltip:{marginRight:"0.5rem"}})));function M(){const{classes:e}=P();return l.createElement(y.A,{className:e.lockedPluginTooltip,title:"This plugin was installed by an administrator, you cannot remove it."},l.createElement(C.A,null))}const w=(0,d.observer)((function({plugin:e,model:t}){var n;const[r,i]=(0,l.useState)(),{pluginManager:s}=(0,E.getEnv)(t),c=(0,E.getSession)(t),{jbrowse:m,adminMode:u}=c,d=!!(0,S.isSessionWithSessionPlugins)(c)&&(null===(n=c.sessionPlugins)||void 0===n?void 0:n.some((t=>s.pluginMetadata[e.name].url===t.url)));return l.createElement(l.Fragment,null,r?l.createElement(l.Suspense,{fallback:null},l.createElement(x,{plugin:r,onClose:t=>{if(t){const t=s.pluginMetadata[e.name];u?m.removePlugin(t):(0,S.isSessionWithSessionPlugins)(c)&&c.removeSessionPlugin(t)}i(void 0)}})):null,l.createElement(k.Ay,{key:e.name},u||d?l.createElement(o.A,{"data-testid":`removePlugin-${e.name}`,onClick:()=>i(e.name)},l.createElement(b.default,null)):l.createElement(M,null),l.createElement(a.A,null,e.name)))})),I=(0,d.observer)((function({pluginManager:e,model:t}){const{plugins:n}=e,{filterText:r}=t,i=n.filter((t=>{var n;return!(null===(n=e.pluginMetadata[t.name])||void 0===n?void 0:n.isCore)}));return l.createElement(f.A,null,i.length>0?i.filter((e=>e.name.toLowerCase().includes(r.toLowerCase()))).map((e=>l.createElement(w,{key:e.name,plugin:e,model:t}))):l.createElement(a.A,null,"No plugins currently installed"))}));var j=n(4785),T=n(56239),F=n(90656),N=n(43671),L=n(71432),z=n(16718),R=n(94017);const W=(0,u.makeStyles)()({card:{margin:"0.5em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center"}}),$=(0,d.observer)((function({plugin:e,model:t,adminMode:n}){const{classes:i}=W(),s=(0,E.getSession)(t),{pluginManager:o}=(0,E.getEnv)(t),{runtimePluginDefinitions:c}=o,m=c.some((t=>t.url===e.url)),[u,d]=(0,l.useState)(!1),p=m||u,v=(0,g.getParent)(t,3),{jbrowse:A}=v;return l.createElement(j.A,{variant:"outlined",key:e.name,className:i.card},l.createElement(T.A,null,l.createElement(a.A,{variant:"h5"},l.createElement(F.A,{href:`${e.location}#readme`,target:"_blank",rel:"noopener"},e.name)),l.createElement("div",{className:i.dataField},l.createElement(L.A,{style:{marginRight:"0.5em"}}),l.createElement(a.A,null,e.authors.join(", "))),l.createElement(a.A,{className:i.bold},"Description:"),l.createElement(a.A,null,e.description)),l.createElement(N.A,null,l.createElement(r.A,{variant:"contained",disabled:p,startIcon:m?l.createElement(R.A,null):l.createElement(z.A,null),onClick:()=>{n?A.addPlugin({name:e.name,url:e.url}):(0,S.isSessionWithSessionPlugins)(s)&&s.addSessionPlugin(e),d(!0)}},m?"Installed":"Install")))})),B=(0,l.lazy)((()=>n.e(4711).then(n.bind(n,4711)))),D=(0,u.makeStyles)()((e=>({expandIcon:{color:e.palette.tertiary.contrastText},adminBadge:{borderRadius:3,backgroundColor:e.palette.quaternary.main,padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"1em auto",display:"flex"}}))),H=(0,d.observer)((function({model:e}){const{classes:t}=D(),{plugins:n,error:u}=function(){const[e,t]=(0,l.useState)(),[n,a]=(0,l.useState)();return(0,l.useEffect)((()=>{(async()=>{try{const e=await fetch("https://jbrowse.org/plugin-store/plugins.json");if(!e.ok){const t=await e.text();throw new Error(`HTTP ${e.status} fetching plugins: ${t}`)}const n=await e.json();t(n.plugins)}catch(e){console.error(e),a(e)}})()}),[]),{plugins:e,error:n}}(),[d,f]=(0,l.useState)(!1),{adminMode:y}=(0,E.getSession)(e),{pluginManager:k}=(0,g.getEnv)(e);return l.createElement("div",null,y&&l.createElement(l.Fragment,null,!E.isElectron&&l.createElement("div",{className:t.adminBadge},l.createElement(h.A,{style:{marginRight:"0.3em"}}),l.createElement(a.A,null,"You are using the ",l.createElement("code",null,"admin-server"),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store.")),l.createElement(r.A,{className:t.customPluginButton,variant:"contained",onClick:()=>f(!0)},"Add custom plugin"),d?l.createElement(l.Suspense,{fallback:null},l.createElement(B,{onClose:()=>f(!1),model:e})):null),l.createElement(i.A,{label:"Filter plugins",value:e.filterText,onChange:t=>e.setFilterText(t.target.value),fullWidth:!0,InputProps:{endAdornment:l.createElement(s.A,{position:"end"},l.createElement(o.A,{onClick:()=>e.clearFilterText()},l.createElement(A.A,null)))}}),l.createElement(c.A,{defaultExpanded:!0},l.createElement(m.A,{expandIcon:l.createElement(v.default,{className:t.expandIcon})},l.createElement(a.A,{variant:"h5"},"Installed plugins")),l.createElement("div",{style:{margin:"1em"}},l.createElement(I,{pluginManager:k,model:e}))),l.createElement(c.A,{defaultExpanded:!0},l.createElement(m.A,{expandIcon:l.createElement(v.default,{className:t.expandIcon})},l.createElement(a.A,{variant:"h5"},"Available plugins")),u?l.createElement(a.A,{color:"error"},`${u}`):n?n.filter((t=>!(E.isElectron&&t.cjsUrl)&&t.name.toLowerCase().includes(e.filterText.toLowerCase()))).map((t=>l.createElement($,{key:t.name,plugin:t,model:e,adminMode:!!y}))):l.createElement(p.LoadingEllipses,null)))}))},94017:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(42032)),r=n(74848);t.A=(0,a.default)((0,r.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check")},12092:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(42032)),r=n(74848);t.A=(0,a.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},90891:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(42032)),r=n(74848);t.A=(0,a.default)((0,r.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined")},29898:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(42032)),r=n(74848);t.A=(0,a.default)((0,r.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock")},71432:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(42032)),r=n(74848);t.A=(0,a.default)((0,r.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")}}]);