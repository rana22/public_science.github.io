/*! For license information please see 4747.67dde7c0.js.LICENSE.txt */
(self.webpackChunkICDC_Frontend=self.webpackChunkICDC_Frontend||[]).push([[4747],{74747:(e,r,t)=>{"use strict";t.d(r,{fetchJb1:()=>g});var o=t(11375),n=t(65363),s=t.n(n),a=t(19575),i=t.n(a),c=t(7562);function u(e){return(null==e?void 0:e.label)&&"string"==typeof e.label}function l(e,r){for(const t of Object.keys(r))t in e&&"object"==typeof r[t]&&"object"==typeof e[t]?l(e[t],r[t]):void 0!==e[t]&&void 0===r[t]||(e[t]=r[t]);return e}function f(e){if(!e||"object"!=typeof e||"[object Function]"===Object.prototype.toString.call(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);let r,t,o;if(Array.isArray(e))for(r=[],t=0,o=e.length;t<o;++t)t in e&&(r[t]=f(e[t]));else r=e.constructor?new e.constructor:{};return function(e,r,t){let o,n;const s={};for(o in r)n=r[o],o in e&&(e[o]===n||o in s&&s[o]===n)||(e[o]=t?t(n):n);return e}(r,e,f)}function d(e,r){if(e.tracks&&!Array.isArray(e.tracks))if(u(e.tracks))e.tracks=[e.tracks];else{const r=[];for(const t of Object.keys(e.tracks)){const o=e.tracks[t];u(o)?r.push(o):r.push({label:t,...o})}e.tracks=r}const t=e.trackMetadata;if(null==t?void 0:t.sources){if("string"==typeof t.sources&&(t.sources=[t.sources]),(null==(o=t.sources)?void 0:o.url)&&"string"==typeof o.url&&(t.sources=[t.sources]),!Array.isArray(t.sources)){const e=[];for(const r of Object.keys(t.sources)){const o=t.sources[r];"name"in o||(o.name=r),e.push(o)}t.sources=e}t.sources=t.sources.map((e=>{if("string"==typeof e){const r={url:e},t=e.match(/\.(\w+)$/);return t&&(r.type=t[1].toLowerCase()),r}return e}))}var o;if(e.sourceUrl=e.sourceUrl||r,e.sourceUrl.startsWith("/")&&(e.sourceUrl=new URL(e.sourceUrl,window.location.href).href),e.baseUrl=e.baseUrl||new URL(".",e.sourceUrl).href,e.baseUrl.length&&!e.baseUrl.endsWith("/")&&(e.baseUrl+="/"),e.sourceUrl){const r=[];e.tracks&&r.push(...e.tracks),e.stores&&r.push(...Object.values(e.stores)),e.names&&r.push(e.names),r.forEach((r=>{r.baseUrl||(r.baseUrl=e.baseUrl||"/")})),e.refSeqs&&"string"==typeof e.refSeqs&&(e.refSeqs=new URL(e.refSeqs,e.sourceUrl).href),e.nameUrl&&(e.nameUrl=new URL(e.nameUrl,e.sourceUrl).href)}return e.stores=e.stores||{},(e.tracks||[]).forEach((r=>{if(r.config){const e=r.config;delete r.config,r={...e,...r}}if(r.store)return;let t;t="FeatureTrack"===r.type?"JBrowse/View/Track/HTMLFeatures":"ImageTrack"===r.type?"JBrowse/View/Track/FixedImage":"ImageTrack.Wiggle"===r.type?"JBrowse/View/Track/FixedImage/Wiggle":"SequenceTrack"===r.type?"JBrowse/View/Track/Sequence":p("JBrowse/View/Track",r.type),r.type=t,w(e,r),r.histograms&&(r.histograms.baseUrl||(r.histograms.baseUrl=r.baseUrl),w(e,r.histograms))})),e}function p(e,r){return r?(r.includes("/")||(r=`${e}/${r}`),r=r.replace(/^\//,"")):""}function w(e,r){var t;const{urlTemplate:o=""}=r,n=r.storeClass?p("JBrowse/Store",r.storeClass):function(e,r){var t,o;return e?(null===(t=e.type)||void 0===t?void 0:t.includes("/FixedImage"))?"JBrowse/Store/TiledImage/Fixed"+(0===e.backendVersion?"_v0":""):/\.jsonz?$/i.test(r)?"JBrowse/Store/SeqFeature/NCList"+(0===e.backendVersion?"_v0":""):/\.bam$/i.test(r)?"JBrowse/Store/SeqFeature/BAM":/\.cram$/i.test(r)?"JBrowse/Store/SeqFeature/CRAM":/\.gff3?$/i.test(r)?"JBrowse/Store/SeqFeature/GFF3":/\.bed$/i.test(r)?"JBrowse/Store/SeqFeature/BED":/\.vcf.b?gz$/i.test(r)?"JBrowse/Store/SeqFeature/VCFTabix":/\.gff3?.b?gz$/i.test(r)?"JBrowse/Store/SeqFeature/GFF3Tabix":/\.bed.b?gz$/i.test(r)?"JBrowse/Store/SeqFeature/BEDTabix":/\.(bw|bigwig)$/i.test(r)?"JBrowse/Store/SeqFeature/BigWig":/\.(bb|bigbed)$/i.test(r)?"JBrowse/Store/SeqFeature/BigBed":/\.(fa|fasta)$/i.test(r)?"JBrowse/Store/SeqFeature/IndexedFasta":/\.(fa|fasta)\.b?gz$/i.test(r)?"JBrowse/Store/SeqFeature/BgzipIndexedFasta":/\.2bit$/i.test(r)?"JBrowse/Store/SeqFeature/TwoBit":(null===(o=e.type)||void 0===o?void 0:o.endsWith("/Sequence"))?"JBrowse/Store/Sequence/StaticChunked":"":""}(r,o);if(!n)return void console.warn(`Unable to determine an appropriate data store to use with track '${r.label}', please explicitly specify a storeClass in the configuration.`);const s={...r,type:n};s.name="JBrowse/Store/Sequence/StaticChunked"!==n&&"JBrowse/Store/Sequence/IndexedFasta"!==n&&"JBrowse/Store/SeqFeature/IndexedFasta"!==n&&"JBrowse/Store/SeqFeature/BgzipIndexedFasta"!==n&&"JBrowse/Store/SeqFeature/TwoBit"!==n&&"JBrowse/Store/Sequence/TwoBit"!==n&&!r.useAsRefSeqStore||(null===(t=e.stores)||void 0===t?void 0:t.refseqs)?`store${(0,c.objectHash)(s)}`:"refseqs",e.stores||(e.stores={}),e.stores[s.name]=s,r.store=s.name}function h(e){return void 0!==e.uri}function y(e){return void 0!==e.localPath}async function g(e={uri:"",locationType:"UriLocation"},r={include:["{dataRoot}/trackList.json","{dataRoot}/tracks.conf"]},t={uri:"",locationType:"UriLocation"}){const o="uri"in e?"uri":"localPath",n=JSON.parse(JSON.stringify(e));let s="";if(h(e)&&(s=e.uri),y(e)&&(s=e.localPath),s.endsWith("/")&&(n[o]=s.slice(0,-1)),h(t)&&t.uri||y(t)&&t.localPath){const e="uri"in t?"uri":"localPath";let r="";h(t)&&(r=t.uri),y(t)&&(r=t.localPath),r.endsWith("/")&&(r=r.slice(0,-1));let s={};for(const t of["jbrowse.conf","jbrowse_conf.json"]){let o=null;try{o=await S({[e]:`${r}/${t}`})}catch(e){console.error(`tried to access ${r}/${t}, but failed`)}s=v(s,o)||{}}return n[o]&&(s.dataRoot=n[o]),b(s)}const a=d(r,window.location.href);return n[o]&&(a.dataRoot=n[o]),b(a)}async function b(e,r=U){const t=l(f(r),e);let o=await async function(e){return async function r(t,o){const n=t.sourceUrl||t.baseUrl;if(!n)throw new Error(`Could not determine source URL: ${JSON.stringify(t)}`);const s=v(f(o),t);if(!s)throw new Error("Problem merging configs");const a=B(function(e){return e?(Array.isArray(e)||(e=[e]),e.map((e=>("string"==typeof e&&(e={url:e}),"format"in e||(e.format=e.url.endsWith(".conf")?"conf":"JB_json"),"JB_json"!==e.format||"version"in e||(e.version=1),e)))):[]}(t.include||[]),s);delete t.include;const i=a.map((async t=>(t.cacheBuster=e.cacheBuster,r(await S({uri:new URL(t.url,n).href,locationType:"UriLocation"}),s))));return(await Promise.all(i)).forEach((e=>{t=v(t,e)||t})),t}(e=f(e),{})}(t);return o=v(o,e)||o,B(o,o),function(e){if(e.tracks||(e.tracks=[]),!e.baseUrl)throw new Error("Must provide a `baseUrl` in configuration")}(o),o}async function S(e){const r=await(0,o.openLocation)(e).readFile("utf8");return h(e)?m(r,e.uri):y(e)?m(r,e.localPath):m(r)}function m(e,r=""){return e.trim().startsWith("{")?function(e,r){if("string"==typeof e){let t;try{t=JSON.parse(e)}catch(e){throw new Error(`${e} when parsing configuration.`)}return d(t,r)}return d(e,r)}(e,r):function(e,r){let t;try{t=function(e,r){let t,o,n,a=[];const c={tracks:{}};let u;function l(){if(void 0!==n){let e;try{const r=n.match(/^json:(.+)/i);if(e=r?JSON.parse(r[1]):/^[+-]?[\d.,]+([eE][-+]?\d+)?$/.test(n)?parseFloat(n.replaceAll(",","")):n,!t)throw new Error(`Error parsing in section ${a.join(" - ")}`);const u=[...a,...t].join(".");if("+="===o){let r=s()(c,u);r?Array.isArray(r)||(r=[r]):r=[],r.push(e),e=r}"true"===e&&(e=!0),"false"===e&&(e=!1),i()(c,u,e)}catch(e){throw new Error(`syntax error${r?` in ${r}`:""}${u?" at line "+(u-1):""}`)}}}return e.split(/\n|\r\n|\r/).forEach(((e,r)=>{u=r+1;const s=e.replace(/^\s*#.+/,"");let i;(i=s.match(/^\s*\[([^\]]+)/))?(l(),t=void 0,n=void 0,a=i[1].trim().split(/\s*\.\s*/),1===a.length&&"general"===a[0].toLowerCase()&&(a=[])):(i=s.match(void 0===n?/^([^+=]+)(\+?=)(.*)/:/^(\S[^+=]+)(\+?=)(.*)/))?(l(),t=i[1].trim().split(/\s*\.\s*/),[,,o]=i,"include"===[...a,...t].join(".")&&(o="+="),n=i[3].trim()):void 0!==t&&(i=s.match(/^\s{0,4}\+\s*(.+)/))?(l(),o="+=",n=i[1].trim()):void 0!==n&&(i=s.match(/^\s+(\S.*)/))?n+=n.length?` ${i[1].trim()}`:i[1].trim():(l(),t=void 0,n=void 0)})),l(),c}(e,r)}catch(e){throw new Error(`${e} when parsing configuration.`)}return d(t,r)}(e,r)}function v(e,r){if(null===r)return null;null===e&&(e={});for(const t of Object.keys(r))if("tracks"===t&&t in e){const o=e[t]||[],n=r[t]||[];if(!Array.isArray(o)||!Array.isArray(n))throw new Error(`Track config has not been properly regularized: ${o} ${n}`);e[t]=k(o||[],n||[])}else"datasets"!==t&&t in e&&"object"==typeof r[t]&&"object"==typeof e[t]?e[t]=l(e[t],r[t]):"dataRoot"===t?(void 0===e[t]||"data"===e[t]&&void 0!==r[t])&&(e[t]=r[t]):void 0!==e[t]&&void 0===r[t]||(e[t]=r[t]);return e}function k(e,r){if(!r.length)return e;const t={};return e.forEach(((e,r)=>{e.index=r,t[e.label]=e})),r.forEach((r=>{const o=t[r.label];o?v(o,r):e.push(r)})),e}function B(e,r){if(!e)return e;if(Array.isArray(e))for(let t=0;t<e.length;t+=1)e[t]=B(e[t],r);else if("object"==typeof e){const t=e;for(const e of Object.keys(t))t[e]=B(t[e],r)}else if("string"==typeof e)return function(e,r){return e.replaceAll(/{([\s\w.]+)}/g,((e,t)=>{t=t.replaceAll(/\s+/g,"");const o=s()(r,t);if(void 0!==o)return"function"==typeof o?o(t):o;if(r.callback){const e=r.callback.call(this,t);if(void 0!==e)return e}return e}))}(e,r);return e}const U={tracks:[],containerID:"GenomeBrowser",dataRoot:"data",show_tracklist:!0,show_nav:!0,show_menu:!0,show_overview:!0,show_fullviewlink:!0,update_browser_title:!0,updateBrowserURL:!0,refSeqs:"{dataRoot}/seq/refSeqs.json",include:["jbrowse.conf","jbrowse_conf.json"],nameUrl:"{dataRoot}/names/root.json",datasets:{_DEFAULT_EXAMPLES:!0,volvox:{url:"?data=sample_data/json/volvox",name:"Volvox Example"},modencode:{url:"?data=sample_data/json/modencode",name:"MODEncode Example"},yeast:{url:"?data=sample_data/json/yeast",name:"Yeast Example"}},highlightSearchedRegions:!1,highResolutionMode:"auto"}},65363:(e,r,t)=>{const o=t(91417);function n(e,r,t){return"function"==typeof t.join?t.join(e):e[0]+r+e[1]}function s(e,r,t){return"function"!=typeof t.isValid||t.isValid(e,r)}function a(e){return o(e)||Array.isArray(e)||"function"==typeof e}e.exports=function(e,r,t){if(o(t)||(t={default:t}),!a(e))return void 0!==t.default?t.default:e;"number"==typeof r&&(r=String(r));const i=Array.isArray(r),c="string"==typeof r,u=t.separator||".",l=t.joinChar||("string"==typeof u?u:".");if(!c&&!i)return e;if(c&&r in e)return s(r,e,t)?e[r]:t.default;let f=i?r:function(e,r,t){return"function"==typeof t.split?t.split(e):e.split(r)}(r,u,t),d=f.length,p=0;do{let r=f[p];for("number"==typeof r&&(r=String(r));r&&"\\"===r.slice(-1);)r=n([r.slice(0,-1),f[++p]||""],l,t);if(r in e){if(!s(r,e,t))return t.default;e=e[r]}else{let o=!1,a=p+1;for(;a<d;)if(r=n([r,f[a++]],l,t),o=r in e){if(!s(r,e,t))return t.default;e=e[r],p=a-1;break}if(!o)return t.default}}while(++p<d&&a(e));return p===d?e:t.default}}}]);